function [q] = distfluid(m, n, C)  % Resistência dos canos    % Padrão = todos 1    R = ones(1,m);  % Obstrução baseada em probabilidade    % Numero usp: 1109301(2)    p = 0.05 + (0.02 .* 2);    for i=2:m      if rand() <= p        R(i) = 10;      end    end    % Matriz de incidência  J = zeros(m,n);  for i=1:m      J(i,C(i,1)) = 1;     J(i,C(i,2)) = -1;  end  % Cálculo de b e s  b = zeros(m,1);   s = -1*ones(n,1);   % Pressão em cada ponto  c = s - J' *diag(1./R) * b;    % Nó 1 = pressão 0    c(1) = 0;    % Resolvendo as Equações da Rede  L = J' * (diag(1./R)) * J;  Ident = eye(n);  L(1,:) = Ident(1,:);   % Matriz de gradientes  q = L\c;   % Fluxo imposto  % f = diag(1./R) * (J*q + b);end